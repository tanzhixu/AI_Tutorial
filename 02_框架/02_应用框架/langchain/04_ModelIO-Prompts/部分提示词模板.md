### 部分提示模板
与其他方法一样，“部分”提示模板是有意义的——例如传入所需值的子集，以创建一个只需要剩余值子集的新提示模板。

LangChain通过两种方式支持这一点：1.使用字符串值进行部分格式化。2.使用返回字符串值的函数进行部分格式化。

这两种不同的方式支持不同的用例。在下面的示例中，我们回顾了这两个用例的动机以及如何在LangChain中做到这一点。


### Partial with strings
想要部分提示模板的一个常见用例是，如果您在其他变量之前获得一些变量。例如，假设您有一个需要两个变量foo和baz的提示模板。如果您在链的早期获得foo值，但稍后获得baz值，等到两个变量在同一个地方传递给提示模板可能会很烦人。相反，您可以用foo值部分提示模板，然后传递分区的提示模板，然后使用它。下面是这样做的一个例子：



```python
from langchain_core.prompts import PromptTemplate

prompt = PromptTemplate.from_template("{foo}{bar}")
partial_prompt = prompt.partial(foo="foo")
print(partial_prompt.format(bar="baz"))
```

    foobaz
    

##### 您也可以只使用分区变量初始化提示符


```python
prompt = PromptTemplate(
    template="{foo}{bar}", input_variables=["bar"], partial_variables={"foo": "foo"}
)
print(prompt.format(bar="baz"))
```

    foobaz
    

### Partial with functions
另一个常见的用法是用函数进行部分。用例是当你有一个变量，你知道你总是想以一种常见的方式获取。一个主要的例子是日期或时间。想象一下，你有一个提示，你总是想拥有当前日期。你不能在提示中硬编码它，把它和其他输入变量一起传递有点烦人。在这种情况下，使用一个总是返回当前日期的函数来部分提示非常方便。



```python
from datetime import datetime


def _get_datetime():
    now = datetime.now()
    return now.strftime("%m/%d/%Y, %H:%M:%S")
```


```python
prompt = PromptTemplate(
    template="Tell me a {adjective} joke about the day {date}",
    input_variables=["adjective", "date"],
)
partial_prompt = prompt.partial(date=_get_datetime)
print(partial_prompt.format(adjective="funny"))
```

    Tell me a funny joke about the day 04/26/2024, 06:22:29
    

##### 
您也可以只使用分区变量初始化提示符，这在这个工作流程中通常更有意义


```python
prompt = PromptTemplate(
    template="Tell me a {adjective} joke about the day {date}",
    input_variables=["adjective"],
    partial_variables={"date": _get_datetime},
)
print(prompt.format(adjective="funny"))
```

    Tell me a funny joke about the day 04/26/2024, 06:23:11
    


>更多：[https://github.com/tanzhixu/AI_Tutorial](https://github.com/tanzhixu/AI_Tutorial)